<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>UI</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" media="screen" href="main.css"/>
  <link rel="stylesheet" type="text/css" media="screen" href="animate.css"/>


  <style type="text/css">
    @font-face {
      font-family: 'iconfont';  /* project id 803924 */
      src: url('//at.alicdn.com/t/font_803924_073p7nal4zk.eot');
      src: url('//at.alicdn.com/t/font_803924_073p7nal4zk.eot?#iefix') format('embedded-opentype'),
      url('//at.alicdn.com/t/font_803924_073p7nal4zk.woff') format('woff'),
      url('//at.alicdn.com/t/font_803924_073p7nal4zk.ttf') format('truetype'),
      url('//at.alicdn.com/t/font_803924_073p7nal4zk.svg#iconfont') format('svg');
    }

    .iconfont {
      font-family: "iconfont" !important;
      font-size: 24px;
      font-style: normal;
      -webkit-font-smoothing: antialiased;
      -webkit-text-stroke-width: 0.2px;
      -moz-osx-font-smoothing: grayscale;
    }

    .hide {
      display: none;
    }

    .verify-code {
      display: flex;
    }

    .err-hint {
      border-bottom: 1px solid red !important;
    }

    .full-width {
      width: 100%;
    }

    .marginTop11 {
      margin-top: 11px;
    }

    .form-tip {
      text-align: center;
      font-size: 11px;
      font-weight: 400;
      margin-bottom: 0px;
    }

  </style>
</head>

<body>
<div id="app" class="hide">
  <div class="container">
    <div class="authing-login-form-wrapper">

      <div class="form-wrapper" :class="{
        'authing-loading-wrapper': loading || oAuthloading,
        animated: true,
        fadeInUp: true
      }">
        <div class="form-header">
          <span v-if="pageStack.length > 0" @click="handleGoBack" class="auth0-lock-back-button"><svg focusable="false" enable-background="new 0 0 24 24" version="1.0" viewBox="0 0 24 24" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <polyline fill="none" points="12.5,21 3.5,12 12.5,3 " stroke="#000000" stroke-miterlimit="10" stroke-width="2"></polyline> <line fill="none" stroke="#000000" stroke-miterlimit="10" stroke-width="2" x1="22" x2="3.5" y1="12" y2="12"></line> </svg></span>
          <div class="form-header-bg"></div>
          <div class="form-header-welcome">
            <img class="form-header-logo"
                 src="https://usercontents.authing.cn/user-avatars/FvchPXRB9aRMzrwej_JTQodyyG5U">
            <div class="form-header-name" title="Authing">{{pageVisible.forgetPasswordVisible ? '重置密码' : 'Authing'}}
            </div>
          </div>
        </div>

        <div v-show="errVisible" class="authing-global-message authing-global-message-error">
              <span class="animated fadeInUp">
                <span>{{errMsg}}</span>
              </span>
        </div>

        <div v-show="successVisible" class="authing-global-message authing-global-message-success">
              <span class="animated fadeInUp">
                <span>{{successMsg}}</span>
              </span>
        </div>

        <div v-show="warnVisible" class="authing-global-message authing-global-message-info">
                <span class="animated fadeInUp">
                  <span>{{warnMsg}}</span>
                </span>
        </div>

        <div class="authing-header-tabs-container">
          <ul class="authing-header-tabs">
            <li v-bind:class="{
              'authing-header-tabs-current': pageVisible.wxQRCodeVisible
            }">
              <a href="javascript:void(0)" @click="gotoWxQRCodeScanning">扫码登录</a>
            </li>
            <li v-bind:class="{
              'authing-header-tabs-current': pageVisible.loginVisible
            }">
              <a href="javascript:void(0)" @click="gotoLogin">登录</a>
            </li>
            <li v-bind:class="{
              'authing-header-tabs-current': pageVisible.signUpVisible
            }">
              <a @click="gotoSignUp" href="javascript:void(0)">注册</a>
            </li>
          </ul>
        </div>

        <div class="authing-oauth-form" v-show="!pageVisible.forgetPasswordVisible && !pageVisible.wxQRCodeVisible">
          <div style="height: 60px;" v-show="oAuthloading">
            <div class="authing-loading-circle margin-top-11"></div>
          </div>

          <div v-for="(item, index) in OAuthList" class="form-group">
            <div class="logmod__alter">
              <div class="logmod__alter-container">
                <a
                  :href="item.url"
                  :class="{'connect': true, 'facebook': item.name === 'Github', 'wechat': item.name === '微信电脑网页版'}">
                  <div class="connect__icon">
                    <i class="iconfont" v-if="item.name === 'Github'">&#xea0a;</i>
                    <i class="iconfont" v-if="item.name === '微信电脑网页版'">&#xf262;</i>
                  </div>
                  <div class="connect__context">
                    <span>{{item.description}}</span>
                  </div>
                </a>
              </div>
            </div>
          </div>
          <P class="form-tip" v-show="!oAuthloading">或者</P>
        </div>

        <div class="form-body" v-show="!oAuthloading">
          <!-- 登录对话框 -->
          <form v-show="pageVisible.loginVisible" action="#" class="authing-form animate-box no-shadow" :class="{
              faster: pageVisible.loginVisible,
              'authing-form': true,
              'no-shadow': pageVisible.loginVisible
            }">

            <div class="form-group">
              <label for="login-username" class="sr-only">邮箱</label>
              <input type="text" class="form-control" id="login-username" v-model="loginForm.email" placeholder="邮箱"
                     autocomplete="off" @keyup.enter="handleLogin">
            </div>
            <div class="form-group">
              <label for="login-password" class="sr-only">密码</label>
              <input type="password" class="form-control" id="login-password" v-model="loginForm.password"
                     placeholder="密码" autocomplete="off" @keyup.enter="handleLogin">
            </div>
            <div v-show="pageVisible.verifyCodeVisible" class="form-group verify-code">
              <input type="text" class="form-control" id="verify-code" v-model="verifyCode" placeholder="请输入验证码"
                     autocomplete="off" @keyup.enter="handleLogin">

              <div class="verify-code-loading-circle" v-show="verifyCodeLoading"></div>
              <img :src="verifyCodeUrl" id="verify-code-img" v-show="!verifyCodeLoading" @load="verifyCodeLoad">

            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="form-group" style="margin-bottom:0px;">
                  <label for="login-remember" style="width:100%">
                    <input type="checkbox" id="login-remember" style="vertical-align: middle; margin: 0"
                           v-model="rememberMe"><span
                    style="vertical-align: middle"> 记住我</span>
                  </label>
                </div>
              </div>
              <div class="col-md-6">
                <div style="display:inline-block;text-align:right;width:100%;font-size:14px">
                  <a href="#" @click="gotoForgetPassword">忘记密码？</a>
                </div>
              </div>
            </div>

          </form>

          <!-- 注册对话框 -->
          <form v-show="pageVisible.signUpVisible" action="#" class="authing-form" :class="{
            'authing-form': true,
            'no-shadow': pageVisible.signUpVisible
          }" data-animate-effect="fadeIn">
            <div class="form-group">
              <label for="sign-up-username" class="sr-only">用户名</label>
              <input type="text" class="form-control" id="sign-up-username" v-model="signUpForm.username"
                     placeholder="用户名"
                     autocomplete="off" @keyup.enter="handleSignUp">
            </div>
            <div class="form-group">
              <label for="sign-up-email" class="sr-only">邮箱地址</label>
              <input type="email" class="form-control" id="sign-up-email" v-model="signUpForm.email"
                     @blur="checkEmail" placeholder="邮箱地址"
                     autocomplete="off" @keyup.enter="handleSignUp">
            </div>
            <div class="form-group">
              <label for="sign-up-password" class="sr-only">密码</label>
              <input type="password" class="form-control" id="sign-up-password" v-model="signUpForm.password"
                     placeholder="密码" autocomplete="off" @keyup.enter="handleSignUp">
            </div>
            <div class="form-group">
              <label for="sign-up-re-password" class="sr-only">确认密码</label>
              <input type="password" class="form-control"
                     :class="{'err-hint': signUpForm.password!==signUpForm.rePassword}" id="sign-up-re-password"
                     v-model="signUpForm.rePassword"
                     placeholder="确认密码" autocomplete="off" @keyup.enter="handleSignUp">
            </div>
          </form>

          <!-- 忘记密码填写邮箱对话框 -->
          <form v-show="pageVisible.forgetPasswordSendEmailVisible" action="#" class="authing-form" :class="{
            animated: pageVisible.forgetPasswordSendEmailVisible,
            faster: pageVisible.forgetPasswordSendEmailVisible,
            'authing-form': true,
            'no-shadow': pageVisible.forgetPasswordSendEmailVisible
          }" data-animate-effect="fadeIn">
            <div class="form-group" style="margin-top: -15px;">
              <label for="forget-password-email" class="sr-only">邮箱地址</label>
              <input v-show="pageVisible.forgetPasswordSendEmailVisible" type="text" class="form-control"
                     id="forget-password-email" placeholder="邮箱地址"
                     autocomplete="off" v-model="forgetPasswordForm.email" @keyup.enter="handleForgetPasswordSendEmail">
            </div>
          </form>
          <!-- 忘记密码填写验证码对话框 -->
          <form v-show="pageVisible.forgetPasswordVerifyCodeVisible" action="#" class="authing-form" :class="{
            animated: pageVisible.forgetPasswordVerifyCodeVisible,
            faster: pageVisible.forgetPasswordVerifyCodeVisible,
            'authing-form': true,
            'no-shadow': pageVisible.forgetPasswordVerifyCodeVisible
          }" data-animate-effect="fadeIn">
            <div class="form-group" style="margin-top: -15px;">
              <label for="forget-password-email" class="sr-only">验证码</label>
              <input type="text" class="form-control" id="forget-password-verify-code" placeholder="请输入验证码"
                     autocomplete="off" v-model="forgetPasswordForm.verifyCode"
                     @keyup.enter="handleSubmitForgetPasswordVerifyCode">
            </div>
          </form>
          <!-- 忘记密码填写新密码对话框 -->
          <form v-show="pageVisible.forgetPasswordNewPasswordVisible" action="#" class="authing-form" :class="{
            animated: pageVisible.forgetPasswordNewPasswordVisible,
            faster: pageVisible.forgetPasswordNewPasswordVisible,
            'authing-form': true,
            'no-shadow': pageVisible.forgetPasswordNewPasswordVisible
          }" data-animate-effect="fadeIn">
            <div class="form-group" style="margin-top: -15px;">
              <label for="forget-password-email" class="sr-only">新密码</label>
              <input type="password" class="form-control" id="forget-password-new-password" placeholder="请输入新密码"
                     autocomplete="off" v-model="forgetPasswordForm.password"
                     @keyup.enter="handleSubmitForgetPasswordNewPassword">
            </div>
          </form>
          <!-- 小程序扫码 -->
          <form v-show="pageVisible.wxQRCodeVisible" action="#" style="height:300px" class="authing-form" :class="{
            animated: pageVisible.wxQRCodeVisible,
            faster: pageVisible.wxQRCodeVisible,
            'authing-form': true,
            'no-shadow': pageVisible.wxQRCodeVisible
          }" data-animate-effect="fadeIn">
            <div class="form-group" style="margin-top: -15px;">
              <div id="qrcode-node"></div>
            </div>
          </form>

        </div>

        <div class="form-footer" :class="{
          'no-height': pageVisible.wxQRCodeVisible
        }">
          <div class="authing-loading-circle" v-show="loading"></div>
          <input v-show="pageVisible.loginVisible && !loading" @click="handleLogin" type="button" value="登录"
                 class="btn btn-primary">
          <input v-show="pageVisible.signUpVisible && !loading" @click="handleSignUp" type="button" value="注册"
                 class="btn btn-primary">
          <input v-show="pageVisible.forgetPasswordSendEmailVisible && !loading" @click="handleForgetPasswordSendEmail"
                 type="button" value="发送邮件"
                 class="btn btn-primary">
          <input v-show="pageVisible.forgetPasswordVerifyCodeVisible && !loading"
                 @click="handleSubmitForgetPasswordVerifyCode" type="button"
                 value="提交验证码" class="btn btn-primary">
          <input v-show="pageVisible.forgetPasswordNewPasswordVisible && !loading"
                 @click="handleSubmitForgetPasswordNewPassword"
                 type="button" value="提交新密码" class="btn btn-primary">
        </div>
      </div>
    </div>
  </div>
</div>
</body>

<script src="https://cdn.authing.cn/sdk/javascript/authing-0.1.23.js"></script>
<script src="../main.js"></script>
<script>

  var form = new AuthingForm({
    clientId: '5a9fa26cf8635a000185528c',
    secret: '427e24d3b7e289ae9469ab6724dc7ff0',

    useQRCode: true,
    useUPMethod: true,
    useOAuth: true,

    // 输入框的placeholder
    placeholder: {
      username: '',
      email: '',
      password: '',
      confirmPassword: '',

      forgotPasswordEmail: ''
    },

    // 自定义的表单验证函数
    verifyMethod: {
      login: function () {

      },

      register: function () {

      }
    },

    qrcodeScanning: {
      redirect: true, // 可选，是否执行跳转（在用户后台配置的URL），默认为true，相关用户信息回传至url上
      onSuccess: function (res) {
      }, // 可选，登录成功后回调函数，redirect为true时不回调此函数
      onError: function (error) {
      }, // 可选，登录失败后回调函数，一般为网络问题
      onIntervalStarting: function (intervalNum) {
      }, // 可选，轮询时的回调函数，intervalNum 为 setInterval 返回的数值，可使用 clearInterval 停止轮询
      interval: 1500, // 可选，每隔多少秒检查一次，默认1500
      tips: '搜索小程序 <strong>身份管家</strong> 扫码登录', // 可选，提示信息，可写HTML
    }
  });

  form.show();

  form.on('oauth-load-success', function () {

  });

  form.on('oauth-load-error', function () {

  });

  form.on('login-success', function () {

  });

  form.on('login-error', function () {

  });

  form.on('register-success', function () {

  });

  form.on('register-error', function () {

  });

  form.on('email-sent', function () {

  });

  form.on('reset-password-success', function () {

  });

  form.on('reset-password-error', function () {

  });

  form.on('qrcode-success', function () {

  });

  form.on('qrcode-error', function () {

  });

  form.on('qrcode-interval-starting', function () {

  });

</script>
</html>